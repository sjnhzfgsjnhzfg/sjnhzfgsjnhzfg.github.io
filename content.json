{"meta":{"title":"YF's Blog","subtitle":"","description":"","author":"Yang Fan","url":"http://sjnhzfgsjnhzfg.github.io/project","root":"/project/"},"pages":[{"title":"","date":"2025-07-07T08:30:55.364Z","updated":"2025-07-07T08:30:55.364Z","comments":true,"path":"about/index.html","permalink":"http://sjnhzfgsjnhzfg.github.io/project/about/index.html","excerpt":"","text":"ä¸‹é¢å†™å…³äºè‡ªå·±çš„å†…å®¹"},{"title":"æ‰€æœ‰åˆ†ç±»","date":"2025-07-07T08:31:42.742Z","updated":"2025-07-07T08:31:42.742Z","comments":true,"path":"categories/index.html","permalink":"http://sjnhzfgsjnhzfg.github.io/project/categories/index.html","excerpt":"","text":""},{"title":"æ‰€æœ‰æ ‡ç­¾","date":"2025-07-07T08:32:11.111Z","updated":"2025-07-07T08:32:11.111Z","comments":true,"path":"tags/index.html","permalink":"http://sjnhzfgsjnhzfg.github.io/project/tags/index.html","excerpt":"","text":""},{"title":"å‹æƒ…é“¾æ¥","date":"2025-07-07T06:13:02.000Z","updated":"2025-07-07T06:18:49.388Z","comments":true,"path":"link/index.html","permalink":"http://sjnhzfgsjnhzfg.github.io/project/link/index.html","excerpt":"","text":""},{"title":"æˆ‘çš„æœ‹å‹ä»¬","date":"2025-07-07T08:58:46.006Z","updated":"2025-07-07T08:58:46.006Z","comments":true,"path":"friends/index.html","permalink":"http://sjnhzfgsjnhzfg.github.io/project/friends/index.html","excerpt":"è¿™é‡Œå†™å‹é“¾ä¸Šæ–¹çš„å†…å®¹ã€‚","text":"è¿™é‡Œå†™å‹é“¾ä¸Šæ–¹çš„å†…å®¹ã€‚"}],"posts":[{"title":"Deepseek-R1æœ¬åœ°éƒ¨ç½²","slug":"deepseekæœ¬åœ°éƒ¨ç½²","date":"2025-07-06T16:05:12.000Z","updated":"2025-07-07T15:13:54.136Z","comments":true,"path":"2025/07/07/deepseekæœ¬åœ°éƒ¨ç½²/","permalink":"http://sjnhzfgsjnhzfg.github.io/project/2025/07/07/deepseek%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2/","excerpt":"","text":"DeepSeek-R1 æœ¬åœ°éƒ¨ç½²åŸºæœ¬ä¿¡æ¯ é¡¹ç›® å†…å®¹ å®éªŒåç§° DeepSeekæœ¬åœ°éƒ¨ç½² æ—¥æœŸ 2025å¹´3æœˆ31æ—¥ æŒ‡å¯¼æ•™å¸ˆ è’‹åš å§“å æ¨å‡¡ ä¸€ã€å®éªŒç¯å¢ƒ ç»„ä»¶ é…ç½®è¯´æ˜ å®¿ä¸»æœºæ“ä½œç³»ç»Ÿ Windows è™šæ‹Ÿæœºç¯å¢ƒ VMware Workstation è™šæ‹ŸåŒ–ç³»ç»Ÿ CentOS 7 å®¿ä¸»æœºç¡¬ä»¶é…ç½® å†…å­˜16GB, RTX4060æ˜¾å¡, i9-13900Hå¤„ç†å™¨, 3TBç¡¬ç›˜ éƒ¨ç½²æ¨¡å‹ DeepSeek-R1-7Bä½å‚æ•°ç‰ˆæœ¬ äºŒã€å®éªŒå†…å®¹åœ¨CentOS 7è™šæ‹Ÿæœºç¯å¢ƒä¸­é€šè¿‡å®¹å™¨åŒ–æŠ€æœ¯éƒ¨ç½²DeepSeek-R1-7Bæ¨¡å‹ï¼Œä¸»è¦æµç¨‹åŒ…æ‹¬ï¼š Dockerç¯å¢ƒå®‰è£…ä¸é…ç½® Ollamaæ¨ç†å¼•æ“éƒ¨ç½² Open WebUIå¯è§†åŒ–ç•Œé¢æ­å»º æ¨¡å‹æœåŠ¡æµ‹è¯•ä¸éªŒè¯ å¤‡æ³¨ï¼šå› ç¡¬ä»¶èµ„æºé™åˆ¶ï¼Œé€‰ç”¨7Bå‚æ•°ç‰ˆæœ¬æ¨¡å‹è¿›è¡Œéƒ¨ç½²æµ‹è¯• ä¸‰ã€éƒ¨ç½²æ­¥éª¤ä¸æ“ä½œè®°å½•1. Dockerç¯å¢ƒå®‰è£…# æ¸…ç†æ—§ç‰ˆæœ¬ç»„ä»¶ sudo yum remove docker \\ docker-client \\ docker-client-latest \\ docker-common \\ docker-latest \\ docker-latest-logrotate \\ docker-logrotate \\ docker-engine # å®‰è£…ä¾èµ–å·¥å…· sudo yum install -y yum-utils # æ·»åŠ å®˜æ–¹ä»“åº“ sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo # å®‰è£…Dockerå¼•æ“ sudo yum install docker-ce docker-ce-cli containerd.io # å¯åŠ¨æœåŠ¡å¹¶è®¾ç½®å¼€æœºè‡ªå¯ sudo systemctl start docker sudo systemctl enable docker # éªŒè¯å®‰è£… sudo docker run hello-world","categories":[{"name":"Linux","slug":"Linux","permalink":"http://sjnhzfgsjnhzfg.github.io/project/categories/Linux/"}],"tags":[{"name":"å¤§æ¨¡å‹","slug":"å¤§æ¨¡å‹","permalink":"http://sjnhzfgsjnhzfg.github.io/project/tags/%E5%A4%A7%E6%A8%A1%E5%9E%8B/"}]},{"title":"ç®€å† æ¨å‡¡","slug":"ç®€å†-æ¨å‡¡","date":"2025-07-06T16:05:12.000Z","updated":"2025-07-07T15:05:45.348Z","comments":true,"path":"2025/07/07/ç®€å†-æ¨å‡¡/","permalink":"http://sjnhzfgsjnhzfg.github.io/project/2025/07/07/%E7%AE%80%E5%8E%86-%E6%9D%A8%E5%87%A1/","excerpt":"","text":"æ¨å‡¡æ±‚èŒæ„å‘ï¼š7-8æœˆéšæ—¶åˆ°å²— ç”µè¯: 15901942650 | é‚®ç®±: 15901942650@163.com | å±…ä½åœ°: ä¸Šæµ· æ•™è‚²ç»å†ä¸Šæµ·å•†å­¦é™¢ç‰©è”ç½‘å·¥ç¨‹ä¸“ä¸š | æœ¬ç§‘2023.09 â€” 2027.06 ä¸»ä¿®è¯¾ç¨‹ï¼šåµŒå…¥å¼ç³»ç»Ÿè®¾è®¡ã€æµ·é‡æ•°æ®å­˜å‚¨ã€ç‰©è”ç½‘é€šä¿¡æŠ€æœ¯ã€LinuxæœåŠ¡å™¨ç®¡ç†ã€å¾®æœºåŸç†ä¸æ¥å£æŠ€æœ¯ã€Cè¯­è¨€ç¨‹åºè®¾è®¡ã€æ¨¡æ‹Ÿç”µå­åŸºç¡€ã€æ•°å­—ç”µå­æŠ€æœ¯åŸºç¡€ç­‰ä¸“ä¸šè¯¾ç¨‹ GPA: ä¸“ä¸šå‰ 3 é¡¹ç›®ç»å†é«˜å¯ç”¨ç³»ç»Ÿéƒ¨ç½² åœ¨é¡¹ç›®è´Ÿè´£äººçš„æŒ‡å¯¼ä¸‹ï¼Œå›´ç»•æŸç”µå­å•†åŠ¡å¹³å°å¼€å±•é«˜å¯ç”¨ç³»ç»Ÿéƒ¨ç½²å·¥ä½œï¼Œè¿ç”¨ CentOS 7 å¼€æºæ“ä½œç³»ç»Ÿä»¥åŠ Keepalivedã€PxCã€Docker å’Œ Nginx ç­‰å¼€æºè½¯ä»¶æ„å»ºé«˜å¯ç”¨é›†ç¾¤ï¼Œå®ç°è´Ÿè½½å‡è¡¡æ¶æ„çš„æ­å»º ååŠ©å›¢é˜Ÿå¯¹é«˜å¯ç”¨ç³»ç»Ÿæ¶æ„è¿›è¡Œä¼˜åŒ–ï¼Œæœ‰æ•ˆç¼“è§£å¹¶åˆ†æµå®¢æˆ·ç«¯è®¿é—®å‹åŠ›ï¼Œæ˜¾è‘—æå‡æœåŠ¡å™¨è¿è¡Œæ•ˆç‡ï¼Œä¸ºä¼ä¸šç½‘ç«™æ‰“é€ ç¨³å®šä¸”è‰¯å¥½çš„è¿è¡Œå¹³å° è´Ÿè´£ä¿éšœç³»ç»Ÿæ‰€è¿è¡Œçš„ Apache Web æœåŠ¡ã€MySQL æ•°æ®å­˜å‚¨åº“æœåŠ¡ä»¥åŠæ–‡ä»¶æœåŠ¡ï¼ˆç”¨äºå­˜å‚¨å•†å“å›¾ç‰‡å’Œè§†é¢‘ï¼‰çš„ç¨³å®šè¿è¡Œ è¶³è¿¹å•†åŠ¡ APP å¼€å‘é¡¹ç›®åœ°å€ï¼šhttps://modao.cc/proto/tgAtQIZsssycujDABjTlbR/sharing?view_mode=read_only è¿ç”¨é¢˜ä¸ºå¼€å±•ä¸ªæ€§åŒ–é¡¹ç›®å¼€å‘å·¥ä½œï¼Œä¸¥æ ¼éµå¾ªå…¶é¡¹ç›®ç»“æ„ã€å¸ƒå±€ä¸åŠŸæ•ˆè®¾è®¡ï¼Œå®Œæˆå¯åŠ¨é¡µã€é¡¶éƒ¨å¯¼èˆªæ åŠåº•éƒ¨å¯¼èˆªæ çš„åŠŸèƒ½æ­å»º å®ç°é¡¶éƒ¨å¯¼èˆªæ ä¸ä¸ªäººä¸­å¿ƒã€æœç´¢ã€å®šä½åŸå¸‚é¡µé¢çš„æœ‰æ•ˆé“¾æ¥ï¼Œä»¥åŠåº•éƒ¨å¯¼èˆªæ å¯¹é¦–é¡µç­‰é¡µé¢çš„ç²¾å‡†å¯¼èˆª å®ä¹ ç»å†äº¤é€šé“¶è¡Œä¸Šæµ·å¸‚åˆ†è¡Œå®ä¹ ç”Ÿ2024.7.16 â€” 2024.8.15 ä¸»è¦äº†è§£é“¶è¡ŒåŸºæœ¬çŸ¥è¯†ã€ä¸šåŠ¡æµç¨‹ç­‰å†…å®¹ï¼Œå‚ä¸é“¶è¡Œç°é‡‘ç½‘æ ¼åŒ–å·¥ä½œ ååŠ©å…å ‚å®¢æˆ·åŠç†è‡ªåŠ©ä¸šåŠ¡ æ ¡å›­ç»å†åˆ›æ–°åˆ›ä¸šéƒ¨ç»„ç»‡ç»„å¹²äº‹2023 â€” 2025 æ‰¿æ‹…éƒ¨é—¨è´¢åŠ¡æŠ¥é”€æµç¨‹å¤„ç†ã€ç¬¬äºŒè¯¾å ‚æ´»åŠ¨ä¿¡æ¯å‘å¸ƒã€æ•™å®¤ç§Ÿå€Ÿç­‰å·¥ä½œäº‹åŠ¡ ç§¯æé…åˆå…¶ä»–éƒ¨é—¨ï¼Œä¸ºå…¶å·¥ä½œæ¨è¿›æä¾›åŠæ—¶æœ‰æ•ˆçš„ååŠ© å­¦æœ¯éƒ¨ç­–åˆ’ç»„å¹²äº‹2023 â€” 2024 è´Ÿè´£æ’°å†™é€šçŸ¥ã€æ¨æ–‡ã€æ–°é—»ç¨¿ç­‰æ–‡æ¡ˆå·¥ä½œ ç­–åˆ’æ‰§è¡ŒäºŒåå››æœŸåšÂ·çº¦è®²å›ä¹‹æ ¡å‹è®²å›ã€95æœŸåšÂ·çº¦è®²å›ç­‰æ´»åŠ¨ é™¢åŠå…¬å®¤éƒ¨ç»„ç»‡ç»„å¹²äº‹2023 â€” 2024 ä¸»è¦è´Ÿè´£å›¢å‘˜ç»Ÿè®¡å·¥ä½œï¼ŒååŠ©ç»„ç»‡éƒ¨å®Œæˆå„é¡¹ä»»åŠ¡ æ‹¥æœ‰ä¸°å¯Œçš„æ±‡æŠ¥åŠæ•°æ®ç»Ÿè®¡ç»éªŒ æŠ€èƒ½è£èª‰è£èª‰å¥–é¡¹ å¤§å­¦ç”Ÿåˆ›æ–°åˆ›ä¸šè®­ç»ƒè®¡åˆ’é¡¹ç›®å›½å®¶çº§ç«‹é¡¹ ä¸­å›½å›½é™…å¤§å­¦ç”Ÿåˆ›æ–°å¤§èµ›å¸‚èµ›é“¶å¥– æŒ‘æˆ˜æ¯æ ¡çº§é‡‘å¥– æ ¡çº§äºŒç­‰å¥–å­¦é‡‘ï¼ˆ2æ¬¡ï¼‰ è¯ä¹¦ CETå…­çº§ ç™¾åº¦å¤§æ¨¡å‹å­¦ç”Ÿè®­ç»ƒè¥ç»“ä¸šè¯ ç‰©è”ç½‘äºŒä¸‰çº§è¯ä¹¦ SSPè‹±æ–‡è®°è€…æŠ¥ç»“ä¸šè¯ C2é©¾é©¶è¯ æŠ€èƒ½ ç†Ÿç»ƒè¿ç”¨OfficeåŠå…¬è½¯ä»¶ æŒæ¡Cè¯­è¨€ç¼–ç¨‹ ç†Ÿæ‚‰æ ‘è“æ´¾å¼€å‘ ç²¾é€šVMwareè™šæ‹ŸåŒ–æŠ€æœ¯","categories":[{"name":"ç®€å†","slug":"ç®€å†","permalink":"http://sjnhzfgsjnhzfg.github.io/project/categories/%E7%AE%80%E5%8E%86/"}],"tags":[{"name":"å®ä¹ ","slug":"å®ä¹ ","permalink":"http://sjnhzfgsjnhzfg.github.io/project/tags/%E5%AE%9E%E4%B9%A0/"}]},{"title":"é«˜å¯ç”¨éƒ¨ç½²","slug":"é«˜å¯ç”¨éƒ¨ç½²","date":"2025-07-06T16:05:12.000Z","updated":"2025-07-07T15:31:22.804Z","comments":true,"path":"2025/07/07/é«˜å¯ç”¨éƒ¨ç½²/","permalink":"http://sjnhzfgsjnhzfg.github.io/project/2025/07/07/%E9%AB%98%E5%8F%AF%E7%94%A8%E9%83%A8%E7%BD%B2/","excerpt":"","text":"ğŸš€é«˜å¯ç”¨ç”µå­å•†åŠ¡å¹³å°éƒ¨ç½²æ–¹æ¡ˆï¼šå®ç°ä¸šåŠ¡çš„æ— ç¼è¿è½¬æ‘˜è¦æœ¬æ–‡èšç„¦äºç”µå­å•†åŠ¡å¹³å°çš„é«˜å¯ç”¨ç³»ç»Ÿéƒ¨ç½²ï¼Œç²¾å¿ƒé€‰ç”¨ CentOS 7 ä½œä¸ºæ“ä½œç³»ç»Ÿï¼Œå·§å¦™å€ŸåŠ© Keepalivedã€PXCã€Docker å’Œ Nginx æ­å»ºé«˜å¯ç”¨é›†ç¾¤ï¼Œæ„å»ºå‡ºé«˜æ•ˆçš„è´Ÿè½½å‡è¡¡æ¶æ„ã€‚æ­¤æ¶æ„çŠ¹å¦‚ä¸€ä½æ™ºèƒ½çš„æµé‡è°ƒåº¦å¸ˆï¼Œèƒ½å¤Ÿæœ‰æ•ˆç¼“è§£å®¢æˆ·ç«¯çš„è®¿é—®å‹åŠ›ï¼Œå¤§å¹…æå‡æœåŠ¡å™¨çš„è¿è¡Œæ•ˆç‡ã€‚å®ƒå…·å¤‡å¼ºå¤§çš„æ‰¿è½½èƒ½åŠ›ï¼Œè¶³ä»¥æ»¡è¶³æ—¥æµè§ˆé‡ 200 ä¸‡ +ã€æˆäº¤ 10 ä¸‡å•çš„ä¸šåŠ¡éœ€æ±‚ï¼Œä¸ºç”µå•†å¹³å°çš„ä¸šåŠ¡è¿ç»­æ€§æä¾›äº†åšå®æœ‰åŠ›çš„ä¿éšœã€‚ å…³é”®è¯ï¼šCentOS 7ï¼Œé«˜å¯ç”¨é›†ç¾¤ï¼Œè´Ÿè½½å‡è¡¡ï¼Œç”µå­å•†åŠ¡å¹³å° ä¸€ã€æ€»ä½“æ¶æ„è®¾è®¡1.1 æŠ€æœ¯æ ˆç»„æˆ ç»„ä»¶ ç‰ˆæœ¬ åŠŸèƒ½ Keepalived å¼€æºç‰ˆ åƒä¸€ä½è­¦è§‰çš„å«å£«ï¼Œå®ç°æœåŠ¡å™¨æ•…éšœè½¬ç§»ï¼Œä¿éšœæœåŠ¡ä¸é—´æ–­ PXC (Percona XtraDB Cluster) 5.7 æ„å»º MySQL é«˜å¯ç”¨é›†ç¾¤ï¼Œå¦‚åŒä¸ºæ•°æ®å®‰å…¨æ‰“é€ äº†ä¸€ä¸ªåšå›ºå ¡å’ Docker æœ€æ–°ç‰ˆ è®©åº”ç”¨å®ç°å®¹å™¨åŒ–éƒ¨ç½²ï¼Œå¦‚åŒå°†åº”ç”¨è£…è¿›ä¸€ä¸ªä¸ªç‹¬ç«‹çš„â€œé­”æ³•ç›’å­â€ Nginx æœ€æ–°ç‰ˆ æ‹…å½“è´Ÿè½½å‡è¡¡ä¸åå‘ä»£ç†çš„é‡ä»»ï¼Œåˆç†åˆ†é…æµé‡ Apache 2.4+ ä½œä¸º Web æœåŠ¡å®¹å™¨ï¼Œä¸ºåº”ç”¨æä¾›ç¨³å®šçš„è¿è¡Œç¯å¢ƒ PHP - FPM 7.4 é«˜æ•ˆå¤„ç†åŠ¨æ€é¡µé¢ï¼Œè®©ç½‘é¡µå†…å®¹ç”ŸåŠ¨å‘ˆç° 1.2 æ¶æ„æ‹“æ‰‘1234567891011121314151617181920212223242526272829graph TD style Client fill:#E5F6FF,stroke:#73A6FF,stroke-width:2px style VIP fill:#FFF6CC,stroke:#FFBC52,stroke-width:2px style LVS01 fill:#E5F6FF,stroke:#73A6FF,stroke-width:2px style LVS02 fill:#E5F6FF,stroke:#73A6FF,stroke-width:2px style WEB01 fill:#E5F6FF,stroke:#73A6FF,stroke-width:2px style WEB02 fill:#E5F6FF,stroke:#73A6FF,stroke-width:2px style PXC fill:#FFF6CC,stroke:#FFBC52,stroke-width:2px style PXC01 fill:#E5F6FF,stroke:#73A6FF,stroke-width:2px style PXC02 fill:#E5F6FF,stroke:#73A6FF,stroke-width:2px style PXC03 fill:#E5F6FF,stroke:#73A6FF,stroke-width:2px style PXC04 fill:#E5F6FF,stroke:#73A6FF,stroke-width:2px style NFS fill:#E5F6FF,stroke:#73A6FF,stroke-width:2px Client --&gt; VIP[è™šæ‹Ÿ IP 192.168.162.125] VIP --&gt; LVS01[è´Ÿè½½å‡è¡¡å™¨ LVS01] VIP --&gt; LVS02[è´Ÿè½½å‡è¡¡å™¨ LVS02] LVS01 --&gt; WEB01[Web æœåŠ¡å™¨ 192.168.162.20] LVS01 --&gt; WEB02[Web æœåŠ¡å™¨ 192.168.162.10] LVS02 --&gt; WEB01 LVS02 --&gt; WEB02 WEB01 --&gt; PXC[PXC é›†ç¾¤] WEB02 --&gt; PXC PXC --&gt; PXC01[192.168.162.130] PXC --&gt; PXC02[192.168.162.132] PXC --&gt; PXC03[192.168.162.137] PXC --&gt; PXC04[192.168.162.138] WEB01 --&gt; NFS[æ–‡ä»¶æœåŠ¡å™¨ 192.168.162.139] WEB02 --&gt; NFS äºŒã€è®¾å¤‡è§„åˆ’ä¸é…ç½®2.1 IPåˆ†é…è¡¨ è®¾å¤‡ç±»å‹ æœºå™¨å VIP é™æ€IP ç”¨é€” æœåŠ¡ç»„ä»¶ è´Ÿè½½å‡è¡¡å™¨ LVS01-23104040136 192.168.162.125 192.168.162.133 ä¸»è¯·æ±‚åˆ†å‘ LVS, Keepalived, Docker è´Ÿè½½å‡è¡¡å™¨ LVS02-23104040136 æ—  192.168.162.136 æ•…éšœæ¥ç®¡ LVS, Keepalived, Docker WebæœåŠ¡å™¨ WEB01-23104040136 æ—  192.168.162.20 å¤„ç†Webè¯·æ±‚ Apache, Docker, NFSå®¢æˆ·ç«¯ WebæœåŠ¡å™¨ WEB02-23104040136 æ—  192.168.162.10 å¤„ç†Webè¯·æ±‚ Apache, Docker, NFSå®¢æˆ·ç«¯ PXCèŠ‚ç‚¹ PXC01-23104040136 æ—  192.168.162.130 æ•°æ®åº“ä¸»èŠ‚ç‚¹ MySQL PXC, Docker PXCèŠ‚ç‚¹ PXC02-23104040136 æ—  192.168.162.132 æ•°æ®åº“èŠ‚ç‚¹ MySQL PXC, Docker PXCèŠ‚ç‚¹ PXC03-23104040136 æ—  192.168.162.137 æ•°æ®åº“èŠ‚ç‚¹ MySQL PXC, Docker PXCèŠ‚ç‚¹ PXC04-23104040136 æ—  192.168.162.138 æ•°æ®åº“èŠ‚ç‚¹ MySQL PXC, Docker æ–‡ä»¶æœåŠ¡å™¨ FILE01-23104040136 æ—  192.168.162.139 å­˜å‚¨åª’ä½“æ–‡ä»¶ NFS Server, Docker 2.2 åŸºç¡€é…ç½®1234567891011121314151617181920# ä¿®æ”¹ä¸»æœºå (ä»¥LVS01ä¸ºä¾‹)hostnamectl set-hostname LVS01-23104040136exec bash# é…ç½®é™æ€IP (ä»¥LVS01ä¸ºä¾‹)vi /etc/sysconfig/network-scripts/ifcfg-ens33# æ–‡ä»¶å†…å®¹ï¼šTYPE=EthernetBOOTPROTO=staticNAME=eth0DEVICE=eth0ONBOOT=yesIPADDR=192.168.162.133NETMASK=255.255.255.0GATEWAY=192.168.162.1DNS1=8.8.8.8# é‡å¯ç½‘ç»œsystemctl restart network ä¸‰ã€æ ¸å¿ƒæœåŠ¡éƒ¨ç½²3.1 Dockerç¯å¢ƒéƒ¨ç½²1234567# æ‰€æœ‰èŠ‚ç‚¹æ‰§è¡Œyum remove docker* -yyum install -y yum-utilsyum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repoyum install -y docker-ce docker-ce-cli containerd.iosystemctl start docker &amp;&amp; systemctl enable dockerdocker run hello-world # éªŒè¯å®‰è£… 3.2 è´Ÿè½½å‡è¡¡å™¨é…ç½® (LVS + Keepalived)1234567891011121314# LVS01/LVS02æ‰§è¡Œyum install -y ipvsadm keepalived# LVSè§„åˆ™é…ç½®ipvsadm -A -t 192.168.162.125:80 -s rripvsadm -a -t 192.168.162.125:80 -r 192.168.162.20:80 -gipvsadm -a -t 192.168.162.125:80 -r 192.168.162.10:80 -gipvsadm-save &gt; /etc/sysconfig/ipvsadm # ä¿å­˜é…ç½®# Keepalivedé…ç½®vi /etc/keepalived/keepalived.conf# ä¸»å¤‡é…ç½®å‚è€ƒæ ‡å‡†VRRPåè®®systemctl start keepalived &amp;&amp; systemctl enable keepalived 3.3 WebæœåŠ¡éƒ¨ç½²123# WEB01/WEB02æ‰§è¡Œdocker pull httpddocker run -d -p 80:80 --name web_server httpd 3.4 PXCæ•°æ®åº“é›†ç¾¤1234567891011121314151617181920# æ‰€æœ‰PXCèŠ‚ç‚¹æ‰§è¡Œmkdir -p /data/pxc/&#123;conf.d,datadir&#125;chmod 777 -R /data/pxc# èŠ‚ç‚¹åˆå§‹åŒ– (PXC01æ‰§è¡Œ)docker run -d \\ -e MYSQL_ROOT_PASSWORD=password \\ -e CLUSTER_NAME=pxc_cluster \\ -e XTRABACKUP_PASSWORD=password \\ --name pxc01 \\ percona/percona-xtradb-cluster:5.7# åŠ å…¥é›†ç¾¤èŠ‚ç‚¹ (å…¶ä»–èŠ‚ç‚¹æ‰§è¡Œ)docker run -d \\ -e MYSQL_ROOT_PASSWORD=password \\ -e CLUSTER_NAME=pxc_cluster \\ -e XTRABACKUP_PASSWORD=password \\ -e CLUSTER_JOIN=pxc01 \\ --name pxc02 \\ percona/percona-xtradb-cluster:5.7 3.5 æ–‡ä»¶æœåŠ¡å™¨é…ç½®1234567891011121314# FILE01æ‰§è¡Œ (NFS Server)yum install -y nfs-utilsmkdir -p /data/nfs_sharechmod -R 755 /data/nfs_sharechown -R nobody:nobody /data/nfs_shareecho &quot;/data/nfs_share 192.168.162.0/24(rw,sync,no_root_squash)&quot; &gt;&gt; /etc/exportssystemctl enable --now nfs-server rpcbindexportfs -v# WEB01/WEB02æ‰§è¡Œ (NFS Client)yum install -y nfs-utilsmkdir -p /var/www/htmlmount -t nfs 192.168.162.139:/data/nfs_share /var/www/html 3.6 tpshopå•†åŸéƒ¨ç½²12345678910111213141516171819# WEB01/WEB02æ‰§è¡Œyum install -y epel-releaseyum install -y https://rpms.remirepo.net/enterprise/remi-release-7.rpmyum install -y yum-utilsyum-config-manager --enable remi-php74yum install -y php php-fpm php-mysql php-mbstring php-xml php-gd php-cli php-curl php-opcachesystemctl enable php-fpm &amp;&amp; systemctl start php-fpm# éƒ¨ç½²tpshopchown nginx:nginx -R /opt/www/chmod 777 -R /opt/www/rm -rf /etc/nginx/conf.d/default.confcp /root/web.conf /etc/nginx/conf.d/systemctl restart nginx# åŒæ­¥WEBé…ç½®åˆ°é›†ç¾¤scp -r /opt/www root@web02_ip:/opt/ssh web02_ip &quot;systemctl restart nginx&quot; å››ã€ç³»ç»Ÿæµ‹è¯•æ–¹æ¡ˆ4.1 è´Ÿè½½å‡è¡¡æµ‹è¯•12345# æ¨¡æ‹Ÿä¸»è´Ÿè½½å‡è¡¡å™¨æ•…éšœsystemctl stop keepalived on LVS01# éªŒè¯VIPæ¼‚ç§»arping -I eth0 192.168.162.125 # åº”æ˜¾ç¤ºLVS02 MACåœ°å€ 4.2 WebæœåŠ¡æµ‹è¯•123curl http://192.168.162.20 # åº”è¿”å›WEB01å†…å®¹curl http://192.168.162.10 # åº”è¿”å›WEB02å†…å®¹curl http://192.168.162.125 # åº”è½®è¯¢è¿”å›WEB01/WEB02å†…å®¹ 4.3 PXCé›†ç¾¤æµ‹è¯•12345678-- åœ¨ä»»æ„èŠ‚ç‚¹åˆ›å»ºæµ‹è¯•æ•°æ®CREATE DATABASE ha_test;USE ha_test;CREATE TABLE cluster_test(id INT PRIMARY KEY AUTO_INCREMENT, data VARCHAR(20));-- åœ¨å…¶ä»–èŠ‚ç‚¹éªŒè¯æ•°æ®åŒæ­¥SHOW DATABASES; # åº”åŒ…å«ha_testSELECT * FROM ha_test.cluster_test; # æ•°æ®åº”ä¸€è‡´ 4.4 æ–‡ä»¶æœåŠ¡æµ‹è¯•123456# åœ¨FILE01åˆ›å»ºæµ‹è¯•æ–‡ä»¶echo &quot;NFS Test&quot; &gt; /data/nfs_share/test.txt# åœ¨WEBèŠ‚ç‚¹éªŒè¯ls /var/www/html # åº”æ˜¾ç¤ºtest.txtcat /var/www/html/test.txt # åº”æ˜¾ç¤º&quot;NFS Test&quot; äº”ã€æ•…éšœå¤„ç†æ–¹æ¡ˆ5.1 MySQLé›†ç¾¤åˆå§‹åŒ–é—®é¢˜1234SET GLOBAL sql_mode=&#x27;NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&#x27;;SET SESSION sql_mode=&#x27;NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&#x27;;ä½¿ç”¨é…ç½®æ–‡ä»¶å®‰è£…nginx vim ngnix.repo 5.2 å®¹å™¨ç«¯å£å†²çª1234567# æ£€æŸ¥ç«¯å£å ç”¨netstat -tuln | grep &lt;ç«¯å£å·&gt;# è§£å†³æ–¹æ¡ˆï¼š# 1. åœæ­¢å ç”¨è¿›ç¨‹# 2. ä¿®æ”¹æœåŠ¡ç«¯å£æ˜ å°„docker run -d -p &lt;æ–°ç«¯å£&gt;:&lt;å®¹å™¨ç«¯å£&gt; ... å‚è€ƒæ–‡çŒ® åˆ˜åˆ©ï¼Œé™ˆå‹‡. åŸºäºKeepalivedå®ç°é«˜å¯ç”¨é›†ç¾¤åŠè´Ÿè½½å‡è¡¡é…ç½®ä¸åˆ†æ[J]. è®¡ç®—æœºå·¥ç¨‹ä¸åº”ç”¨, 2022, 38(05): 200-202. å¼ å¿—æ°. åŸºäºNginxçš„è´Ÿè½½å‡è¡¡ç­–ç•¥ä¼˜åŒ–ç ”ç©¶[J]. ç”µå­æŠ€æœ¯ä¸è½¯ä»¶å·¥ç¨‹, 2019(02). å´æ˜å. åŸºäºLinuxé«˜å¯ç”¨é›†ç¾¤å’Œè´Ÿè½½å‡è¡¡æŠ€æœ¯ç ”ç©¶[J]. ç§‘æŠ€åˆ›æ–°ä¸åº”ç”¨, 2018(36). Percona XtraDB Cluster å®˜æ–¹æ–‡æ¡£. https://www.percona.com/doc/percona-xtradb-cluster Keepalived User Guide. https://www.keepalived.org/documentation.html &gt; **éƒ¨ç½²è¯´æ˜**ï¼š &gt; 1. æœ¬æ–¹æ¡ˆé‡‡ç”¨**åŒæ´»è´Ÿè½½å‡è¡¡**+**Webé›†ç¾¤**+**å¤šèŠ‚ç‚¹PXC**æ¶æ„ï¼Œå®ç°å…¨é“¾è·¯é«˜å¯ç”¨ &gt; 2. æ–‡ä»¶æœåŠ¡é‡‡ç”¨NFSé›†ä¸­å­˜å‚¨ï¼Œç¡®ä¿WebèŠ‚ç‚¹é—´æ•°æ®ä¸€è‡´æ€§ &gt; 3. æ•°æ®åº“é›†ç¾¤éœ€ç¡®ä¿èŠ‚ç‚¹é—´ç½‘ç»œå»¶è¿Ÿ&lt;1msï¼Œå»ºè®®ä½¿ç”¨ä¸‡å…†ç½‘ç»œäº’è” &gt; 4. ç”Ÿäº§ç¯å¢ƒå»ºè®®å¢åŠ Redisç¼“å­˜å±‚å’ŒELKæ—¥å¿—ç›‘æ§ç³»ç»Ÿ","categories":[{"name":"Linux","slug":"Linux","permalink":"http://sjnhzfgsjnhzfg.github.io/project/categories/Linux/"}],"tags":[{"name":"LinuxæœåŠ¡å™¨ç®¡ç†","slug":"LinuxæœåŠ¡å™¨ç®¡ç†","permalink":"http://sjnhzfgsjnhzfg.github.io/project/tags/Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/"}]}],"categories":[{"name":"Linux","slug":"Linux","permalink":"http://sjnhzfgsjnhzfg.github.io/project/categories/Linux/"},{"name":"ç®€å†","slug":"ç®€å†","permalink":"http://sjnhzfgsjnhzfg.github.io/project/categories/%E7%AE%80%E5%8E%86/"}],"tags":[{"name":"å¤§æ¨¡å‹","slug":"å¤§æ¨¡å‹","permalink":"http://sjnhzfgsjnhzfg.github.io/project/tags/%E5%A4%A7%E6%A8%A1%E5%9E%8B/"},{"name":"å®ä¹ ","slug":"å®ä¹ ","permalink":"http://sjnhzfgsjnhzfg.github.io/project/tags/%E5%AE%9E%E4%B9%A0/"},{"name":"LinuxæœåŠ¡å™¨ç®¡ç†","slug":"LinuxæœåŠ¡å™¨ç®¡ç†","permalink":"http://sjnhzfgsjnhzfg.github.io/project/tags/Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AE%A1%E7%90%86/"}]}